(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{717:function(e,n,t){"use strict";t.r(n);var a=t(1),o=Object(a.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"ibc-token-transfer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ibc-token-transfer"}},[e._v("#")]),e._v(" IBC Token Transfer")]),e._v(" "),t("HighlightBox",{attrs:{type:"learning"}},[t("p",[e._v("Transferring tokens between chains is both a common requirement and a significant technical challenge when two chains are incompatible. A convenient solution for moving tokens between chains is essential.\n"),t("br"),t("br"),e._v("\nIn this section, you will explore how a fungible token transfer can be done with IBC.")])]),e._v(" "),t("p",[e._v("Having looked at IBC's transport, authentication, and ordering layer (IBC/TAO), you can now take a look at "),t("a",{attrs:{href:"https://github.com/cosmos/ibc/blob/master/spec/app/ics-020-fungible-token-transfer/README.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("ICS-20"),t("OutboundLink")],1),e._v(". ICS-20 describes "),t("strong",[e._v("fungible token transfers")]),e._v(".")]),e._v(" "),t("HighlightBox",{attrs:{type:"info"}},[t("p",[e._v("Fungibility refers to an instance in which a token is interchangeable with other instances of that token or not. Fungible tokens can be exchanged and replaced.")])]),e._v(" "),t("p",[e._v("There are many use cases involving token transfers on blockchains, like the tokenization of assets holding value or initial coin offerings (ICOs) to finance blockchain projects. IBC makes it possible to transfer tokens and other digital assets between (sovereign) chains, both fungible and non-fungible tokens. For example, fungible token transfers allow you to build applications relying on cross-chain payments and token exchanges. Therefore, IBC frees up great potential for cross-chain Decentralized Finance (DeFi) applications by offering a technically reliable cross-chain interoperability protocol that is compatible with digital assets on multiple networks.")]),e._v(" "),t("p",[e._v("The corresponding "),t("a",{attrs:{href:"https://github.com/cosmos/ibc-go/tree/main/modules/apps/transfer",target:"_blank",rel:"noopener noreferrer"}},[e._v("implementation"),t("OutboundLink")],1),e._v(" is a module on the application level.")]),e._v(" "),t("p",[t("tm-image",{attrs:{src:"/academy/3-ibc/images/transferoverview.png"}})],1),e._v(" "),t("p",[e._v("Look at the picture above. You can see two chains, A and B. You also see there is a channel connecting both chains.")]),e._v(" "),t("p",[e._v("How can tokens be transferred between chains and channels?")]),e._v(" "),t("p",[e._v("To understand the application logic for a token transfer, first, you have to determine the "),t("strong",[e._v("source")]),e._v(" chain:")]),e._v(" "),t("p",[t("tm-image",{attrs:{src:"/academy/3-ibc/images/sourcechain.png"}})],1),e._v(" "),t("p",[e._v("Then the application logic can be summarized:")]),e._v(" "),t("p",[t("tm-image",{attrs:{src:"/academy/3-ibc/images/applicationlogic.png"}})],1),e._v(" "),t("p",[e._v("Shortly you will see the corresponding code. Now again have a look at a transfer from "),t("strong",[e._v("source")]),e._v(" to "),t("strong",[e._v("sink")]),e._v(":")]),e._v(" "),t("p",[t("tm-image",{attrs:{src:"/academy/3-ibc/images/sourcetosink.png"}})],1),e._v(" "),t("p",[e._v("Above the "),t("strong",[e._v("source")]),e._v(" is chain A. The source channel is "),t("strong",[e._v("channel-2")]),e._v(" and the destination channel is "),t("strong",[e._v("channel-40")]),e._v(". The token denominations are represented as "),t("code",[e._v("{Port}/{Channel}/{denom}")]),e._v(" (or rather their "),t("RouterLink",{attrs:{to:"/tutorials/5-ibc-dev/"}},[e._v("IBC denom representation")]),e._v(" on chain). The prefixed port and channel pair indicate which channel the funds were previously sent through. You see "),t("strong",[e._v("transfer/channel-...")]),e._v(" because the transfer module will bind to a port, which is named transfer. If chain A sends 100 ATOM tokens, chain B will receive 100 ATOM tokens and append the destination prefix "),t("strong",[e._v("port/channel-id")]),e._v(". So chain B will mint those 100 ATOM tokens as "),t("strong",[e._v("ibc/<hash of transfer/channel-40/uatom>")]),e._v(". The "),t("strong",[e._v("channel-id")]),e._v(" will be increased sequentially per channel on a given connection.")],1),e._v(" "),t("HighlightBox",{attrs:{type:"note"}},[t("p",[e._v("We can send assets (or their IBC voucher representation) in multiple "),t("em",[e._v("hops")]),e._v(" across multiple chains. Every single time the path will be prepended with the "),t("em",[e._v("port/channel-id/...")]),e._v(" prefix.\n"),t("br"),t("br"),e._v("\nWhen sending this IBC denom (having had multiple hops) back to its source chain, for every hop back one "),t("em",[e._v("port/channel-id/...")]),e._v(" prefix will be taken off. This results in a return to the original denom if all the hops are reversed.")])]),e._v(" "),t("p",[e._v("If the tokens are sent back from the "),t("strong",[e._v("same channel")]),e._v(" as they were received:")]),e._v(" "),t("p",[t("tm-image",{attrs:{src:"/academy/3-ibc/images/sinktosource.png"}})],1),e._v(" "),t("p",[e._v('Chain A will "un-escrow" 100 '),t("strong",[e._v("ATOM tokens")]),e._v(", thus, the prefix will be removed. Chain B will burn "),t("strong",[e._v("transfer/channel-40/atoms")]),e._v(".")]),e._v(" "),t("HighlightBox",{attrs:{type:"note"}},[t("p",[e._v("The prefix determines the "),t("strong",[e._v("source")]),e._v(" chain. If the module sends the token from another channel, chain B is the source chain and chain A mints new tokens with a prefix instead of un-escrowing ATOM tokens. You can have different channels between two chains, but you cannot transfer the same token across different channels back and forth. If "),t("code",[e._v("{denom}")]),e._v(" contains "),t("code",[e._v("/")]),e._v(", then it must also follow the ICS-20 form, which indicates that this token has a multi-hop record. This requires that the character "),t("code",[e._v("/")]),e._v(" is prohibited in non-IBC token denomination names.")])]),e._v(" "),t("p",[t("tm-image",{attrs:{src:"/academy/3-ibc/images/sourcesinklogic.png"}})],1),e._v(" "),t("p",[e._v("You already know that an application needs to implement the "),t("a",{attrs:{href:"https://github.com/cosmos/ibc-go/blob/v5.1.0/modules/core/05-port/types/module.go",target:"_blank",rel:"noopener noreferrer"}},[e._v("IBC Module Interface"),t("OutboundLink")],1),e._v(", so have a look at the "),t("a",{attrs:{href:"https://github.com/cosmos/ibc-go/blob/v5.1.0/modules/apps/transfer/ibc_module.go",target:"_blank",rel:"noopener noreferrer"}},[e._v("implementation for the token transfer"),t("OutboundLink")],1),e._v(", e.g. for "),t("code",[e._v("OnChanOpenInit")]),e._v(":")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gT25DaGFuT3BlbkluaXQgaW1wbGVtZW50cyB0aGUgSUJDTW9kdWxlIGludGVyZmFjZQpmdW5jIChpbSBJQkNNb2R1bGUpIE9uQ2hhbk9wZW5Jbml0KAogICAgY3R4IHNkay5Db250ZXh0LAogICAgb3JkZXIgY2hhbm5lbHR5cGVzLk9yZGVyLAogICAgY29ubmVjdGlvbkhvcHMgW11zdHJpbmcsCiAgICBwb3J0SUQgc3RyaW5nLAogICAgY2hhbm5lbElEIHN0cmluZywKICAgIGNoYW5DYXAgKmNhcGFiaWxpdHl0eXBlcy5DYXBhYmlsaXR5LAogICAgY291bnRlcnBhcnR5IGNoYW5uZWx0eXBlcy5Db3VudGVycGFydHksCiAgICB2ZXJzaW9uIHN0cmluZywKKSBlcnJvciB7CiAgICBpZiBlcnIgOj0gVmFsaWRhdGVUcmFuc2ZlckNoYW5uZWxQYXJhbXMoY3R4LCBpbS5rZWVwZXIsIG9yZGVyLCBwb3J0SUQsIGNoYW5uZWxJRCk7IGVyciAhPSBuaWwgewogICAgICAgIHJldHVybiBlcnIKICAgIH0KCiAgICBpZiB2ZXJzaW9uICE9IHR5cGVzLlZlcnNpb24gewogICAgICAgIHJldHVybiBzZGtlcnJvcnMuV3JhcGYodHlwZXMuRXJySW52YWxpZFZlcnNpb24sICZxdW90O2dvdCAlcywgZXhwZWN0ZWQgJXMmcXVvdDssIHZlcnNpb24sIHR5cGVzLlZlcnNpb24pCiAgICB9CgogICAgLy8gQ2xhaW0gY2hhbm5lbCBjYXBhYmlsaXR5IHBhc3NlZCBiYWNrIGJ5IElCQyBtb2R1bGUKICAgIGlmIGVyciA6PSBpbS5rZWVwZXIuQ2xhaW1DYXBhYmlsaXR5KGN0eCwgY2hhbkNhcCwgaG9zdC5DaGFubmVsQ2FwYWJpbGl0eVBhdGgocG9ydElELCBjaGFubmVsSUQpKTsgZXJyICE9IG5pbCB7CiAgICAgICAgcmV0dXJuIGVycgogICAgfQoKICAgIHJldHVybiBuaWwKfQo="}}),e._v(" "),t("p",[t("code",[e._v("OnChanOpenAck")]),e._v(", "),t("code",[e._v("OnChanOpenConfirm")]),e._v(", "),t("code",[e._v("OnChanCloseInit")]),e._v(", and "),t("code",[e._v("OnChanCloseConfirm")]),e._v(" will do (almost) no checks.")]),e._v(" "),t("h2",{attrs:{id:"transfer-packet-flow"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#transfer-packet-flow"}},[e._v("#")]),e._v(" Transfer packet flow")]),e._v(" "),t("p",[e._v("You have seen an introduction to the application packet flow in "),t("RouterLink",{attrs:{to:"/academy/3-ibc/3-channels.md/#application-packet-flow"}},[e._v("the section on channels")]),e._v(". This section will analyze this packet flow for the specific case of the "),t("em",[e._v("transfer")]),e._v(" module.")],1),e._v(" "),t("h3",{attrs:{id:"sending-a-transfer-packet"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sending-a-transfer-packet"}},[e._v("#")]),e._v(" Sending a transfer packet")]),e._v(" "),t("p",[e._v("After a channel is established, the module can start sending and receiving packets.")]),e._v(" "),t("p",[e._v("So where does the module send a token? Take a look at the "),t("a",{attrs:{href:"https://github.com/cosmos/ibc-go/blob/v5.1.0/modules/apps/transfer/keeper/msg_server.go",target:"_blank",rel:"noopener noreferrer"}},[e._v("msg_server.go"),t("OutboundLink")],1),e._v(" of the token transfer module:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gVHJhbnNmZXIgZGVmaW5lcyBhIHJwYyBoYW5kbGVyIG1ldGhvZCBmb3IgTXNnVHJhbnNmZXIuCmZ1bmMgKGsgS2VlcGVyKSBUcmFuc2Zlcihnb0N0eCBjb250ZXh0LkNvbnRleHQsIG1zZyAqdHlwZXMuTXNnVHJhbnNmZXIpICgqdHlwZXMuTXNnVHJhbnNmZXJSZXNwb25zZSwgZXJyb3IpIHsKICAgIC4uLgoKICAgIGlmIGVyciA6PSBrLlNlbmRUcmFuc2ZlcigKICAgICAgICBjdHgsIG1zZy5Tb3VyY2VQb3J0LCBtc2cuU291cmNlQ2hhbm5lbCwgbXNnLlRva2VuLCBzZW5kZXIsIG1zZy5SZWNlaXZlciwgbXNnLlRpbWVvdXRIZWlnaHQsIG1zZy5UaW1lb3V0VGltZXN0YW1wLAogICAgICAgICk7IGVyciAhPSBuaWwgewogICAgICAgIHJldHVybiBuaWwsIGVycgogICAgfQogICAgLi4uCn0K"}}),e._v(" "),t("p",[e._v("There you see "),t("code",[e._v("SendTransfer")]),e._v(", which implements the application logic after "),t("a",{attrs:{href:"https://github.com/cosmos/ibc-go/blob/v5.1.0/modules/apps/transfer/types/coin.go",target:"_blank",rel:"noopener noreferrer"}},[e._v("checking if the sender is a source or sink chain"),t("OutboundLink")],1),e._v(":")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAoayBLZWVwZXIpIFNlbmRUcmFuc2ZlcigKICAgIGN0eCBzZGsuQ29udGV4dCwKICAgIHNvdXJjZVBvcnQsCiAgICBzb3VyY2VDaGFubmVsIHN0cmluZywKICAgIHRva2VuIHNkay5Db2luLAogICAgc2VuZGVyIHNkay5BY2NBZGRyZXNzLAogICAgcmVjZWl2ZXIgc3RyaW5nLAogICAgdGltZW91dEhlaWdodCBjbGllbnR0eXBlcy5IZWlnaHQsCiAgICB0aW1lb3V0VGltZXN0YW1wIHVpbnQ2NCwKKSB7CiAgLi4uCgogICAgLy8gZGVjb25zdHJ1Y3QgdGhlIHRva2VuIGRlbm9taW5hdGlvbiBpbnRvIHRoZSBkZW5vbWluYXRpb24gdHJhY2UgaW5mbwogICAgLy8gdG8gZGV0ZXJtaW5lIGlmIHRoZSBzZW5kZXIgaXMgdGhlIHNvdXJjZSBjaGFpbgogICAgaWYgc3RyaW5ncy5IYXNQcmVmaXgodG9rZW4uRGVub20sICZxdW90O2liYy8mcXVvdDspIHsKICAgICAgICBmdWxsRGVub21QYXRoLCBlcnIgPSBrLkRlbm9tUGF0aEZyb21IYXNoKGN0eCwgdG9rZW4uRGVub20pCiAgICAgICAgaWYgZXJyICE9IG5pbCB7CiAgICAgICAgICAgIHJldHVybiBlcnIKICAgICAgICB9CiAgICB9CgogICAgLi4uCgogICAgLy8gTk9URTogU2VuZFRyYW5zZmVyIHNpbXBseSBzZW5kcyB0aGUgZGVub21pbmF0aW9uIGFzIGl0IGV4aXN0cyBvbiBpdHMgb3duCiAgICAvLyBjaGFpbiBpbnNpZGUgdGhlIHBhY2tldCBkYXRhLiBUaGUgcmVjZWl2aW5nIGNoYWluIHdpbGwgcGVyZm9ybSBkZW5vbQogICAgLy8gcHJlZml4aW5nIGFzIG5lY2Vzc2FyeS4KCiAgICBpZiB0eXBlcy5TZW5kZXJDaGFpbklzU291cmNlKHNvdXJjZVBvcnQsIHNvdXJjZUNoYW5uZWwsIGZ1bGxEZW5vbVBhdGgpIHsKICAgICAgICAuLi4KCiAgICAgICAgLy8gY3JlYXRlIHRoZSBlc2Nyb3cgYWRkcmVzcyBmb3IgdGhlIHRva2VucwogICAgICAgIGVzY3Jvd0FkZHJlc3MgOj0gdHlwZXMuR2V0RXNjcm93QWRkcmVzcyhzb3VyY2VQb3J0LCBzb3VyY2VDaGFubmVsKQoKICAgICAgICAvLyBlc2Nyb3cgc291cmNlIHRva2Vucy4gSXQgZmFpbHMgaWYgYmFsYW5jZSBpbnN1ZmZpY2llbnQuCiAgICAgICAgaWYgZXJyIDo9IGsuYmFua0tlZXBlci5TZW5kQ29pbnMoLi4uKSB7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLi4uCgogICAgICAgICAgICBpZiBlcnIgOj0gay5iYW5rS2VlcGVyLlNlbmRDb2luc0Zyb21BY2NvdW50VG9Nb2R1bGUoLi4uKTsKCiAgICAgICAgICAgIC4uLgoKICAgICAgICAgICAgaWYgZXJyIDo9IGsuYmFua0tlZXBlci5CdXJuQ29pbnMoLi4uKTsKCiAgICAgICAgICAgIC4uLgogICAgICAgIH0KCiAgICAgICAgcGFja2V0RGF0YSA6PSB0eXBlcy5OZXdGdW5naWJsZVRva2VuUGFja2V0RGF0YSgKICAgICAgICAgICAgZnVsbERlbm9tUGF0aCwgdG9rZW4uQW1vdW50LlN0cmluZygpLCBzZW5kZXIuU3RyaW5nKCksIHJlY2VpdmVyLAogICAgICAgICkKICAgICAgICAuLi4KICAgIH0KfQo="}}),e._v(" "),t("p",[e._v("Take a look at the "),t("a",{attrs:{href:"https://github.com/cosmos/ibc-go/blob/v5.1.0/proto/ibc/applications/transfer/v2/packet.proto",target:"_blank",rel:"noopener noreferrer"}},[e._v("type definition of a token packet"),t("OutboundLink")],1),e._v(" before diving further into the code:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"protobuf",base64:"c3ludGF4ID0gJnF1b3Q7cHJvdG8zJnF1b3Q7OwoKcGFja2FnZSBpYmMuYXBwbGljYXRpb25zLnRyYW5zZmVyLnYyOwoKb3B0aW9uIGdvX3BhY2thZ2UgPSAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9pYmMtZ28vdjMvbW9kdWxlcy9hcHBzL3RyYW5zZmVyL3R5cGVzJnF1b3Q7OwoKLy8gRnVuZ2libGVUb2tlblBhY2tldERhdGEgZGVmaW5lcyBhIHN0cnVjdCBmb3IgdGhlIHBhY2tldCBwYXlsb2FkCi8vIFNlZSBGdW5naWJsZVRva2VuUGFja2V0RGF0YSBzcGVjOgovLyBodHRwczovL2dpdGh1Yi5jb20vY29zbW9zL2liYy90cmVlL21hc3Rlci9zcGVjL2FwcC9pY3MtMDIwLWZ1bmdpYmxlLXRva2VuLXRyYW5zZmVyI2RhdGEtc3RydWN0dXJlcwptZXNzYWdlIEZ1bmdpYmxlVG9rZW5QYWNrZXREYXRhIHsKICAgIC8vIHRoZSB0b2tlbiBkZW5vbWluYXRpb24gdG8gYmUgdHJhbnNmZXJyZWQKICAgIHN0cmluZyBkZW5vbSA9IDE7CiAgICAvLyB0aGUgdG9rZW4gYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkCiAgICBzdHJpbmcgYW1vdW50ID0gMjsKICAgIC8vIHRoZSBzZW5kZXIgYWRkcmVzcwogICAgc3RyaW5nIHNlbmRlciA9IDM7CiAgICAvLyB0aGUgcmVjaXBpZW50IGFkZHJlc3Mgb24gdGhlIGRlc3RpbmF0aW9uIGNoYWluCiAgICBzdHJpbmcgcmVjZWl2ZXIgPSA0OwogICAgLy8gb3B0aW9uYWwgbWVtbwogICAgc3RyaW5nIG1lbW8gPSA1Owp9Cg=="}}),e._v(" "),t("HighlightBox",{attrs:{type:"note"}},[t("p",[e._v("An optional "),t("em",[e._v("memo")]),e._v(" field was recently added to the packet definition. More details on the motivation, use cases, and consequences can be found in the "),t("a",{attrs:{href:"https://medium.com/the-interchain-foundation/moving-beyond-simple-token-transfers-d42b2b1dc29b",target:"_blank",rel:"noopener noreferrer"}},[e._v("accompanying blog post"),t("OutboundLink")],1),e._v(".")])]),e._v(" "),t("h3",{attrs:{id:"receiving-a-transfer-packet"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#receiving-a-transfer-packet"}},[e._v("#")]),e._v(" Receiving a transfer packet")]),e._v(" "),t("p",[e._v("A relayer will then pick up the "),t("code",[e._v("SendPacket")]),e._v(" event and submit a "),t("code",[e._v("MsgRecvPacket")]),e._v(" on the destination chain.")]),e._v(" "),t("p",[e._v("This will trigger an "),t("code",[e._v("OnRecvPacket")]),e._v(" callback that will decode a packet and apply the transfer token application logic:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gT25SZWN2UGFja2V0IGltcGxlbWVudHMgdGhlIElCQ01vZHVsZSBpbnRlcmZhY2UuIEEgc3VjY2Vzc2Z1bCBhY2tub3dsZWRnZW1lbnQKLy8gaXMgcmV0dXJuZWQgaWYgdGhlIHBhY2tldCBkYXRhIGlzIHN1Y2Nlc3NmdWxseSBkZWNvZGVkIGFuZCB0aGUgcmVjZWl2ZSBhcHBsaWNhdGlvbgovLyBsb2dpYyByZXR1cm5zIHdpdGhvdXQgZXJyb3IuCmZ1bmMgKGltIElCQ01vZHVsZSkgT25SZWN2UGFja2V0KAogICAgY3R4IHNkay5Db250ZXh0LAogICAgcGFja2V0IGNoYW5uZWx0eXBlcy5QYWNrZXQsCiAgICByZWxheWVyIHNkay5BY2NBZGRyZXNzLAopIGliY2V4cG9ydGVkLkFja25vd2xlZGdlbWVudCB7CiAgICBhY2sgOj0gY2hhbm5lbHR5cGVzLk5ld1Jlc3VsdEFja25vd2xlZGdlbWVudChbXWJ5dGV7Ynl0ZSgxKX0pCgoJdmFyIGRhdGEgdHlwZXMuRnVuZ2libGVUb2tlblBhY2tldERhdGEKCXZhciBhY2tFcnIgZXJyb3IKCWlmIGVyciA6PSB0eXBlcy5Nb2R1bGVDZGMuVW5tYXJzaGFsSlNPTihwYWNrZXQuR2V0RGF0YSgpLCAmYW1wO2RhdGEpOyBlcnIgIT0gbmlsIHsKCQlhY2tFcnIgPSBzZGtlcnJvcnMuV3JhcGYoc2RrZXJyb3JzLkVyckludmFsaWRUeXBlLCAmcXVvdDtjYW5ub3QgdW5tYXJzaGFsIElDUy0yMCB0cmFuc2ZlciBwYWNrZXQgZGF0YSZxdW90OykKCQlhY2sgPSBjaGFubmVsdHlwZXMuTmV3RXJyb3JBY2tub3dsZWRnZW1lbnQoYWNrRXJyKQoJfQoKCS8vIG9ubHkgYXR0ZW1wdCB0aGUgYXBwbGljYXRpb24gbG9naWMgaWYgdGhlIHBhY2tldCBkYXRhCgkvLyB3YXMgc3VjY2Vzc2Z1bGx5IGRlY29kZWQKCWlmIGFjay5TdWNjZXNzKCkgewoJCWVyciA6PSBpbS5rZWVwZXIuT25SZWN2UGFja2V0KGN0eCwgcGFja2V0LCBkYXRhKQoJCWlmIGVyciAhPSBuaWwgewoJCQlhY2sgPSBjaGFubmVsdHlwZXMuTmV3RXJyb3JBY2tub3dsZWRnZW1lbnQoZXJyKQoJCQlhY2tFcnIgPSBlcnIKCQl9Cgl9CgoJZXZlbnRBdHRyaWJ1dGVzIDo9IFtdc2RrLkF0dHJpYnV0ZXsKCQlzZGsuTmV3QXR0cmlidXRlKHNkay5BdHRyaWJ1dGVLZXlNb2R1bGUsIHR5cGVzLk1vZHVsZU5hbWUpLAoJCXNkay5OZXdBdHRyaWJ1dGUoc2RrLkF0dHJpYnV0ZUtleVNlbmRlciwgZGF0YS5TZW5kZXIpLAoJCXNkay5OZXdBdHRyaWJ1dGUodHlwZXMuQXR0cmlidXRlS2V5UmVjZWl2ZXIsIGRhdGEuUmVjZWl2ZXIpLAoJCXNkay5OZXdBdHRyaWJ1dGUodHlwZXMuQXR0cmlidXRlS2V5RGVub20sIGRhdGEuRGVub20pLAoJCXNkay5OZXdBdHRyaWJ1dGUodHlwZXMuQXR0cmlidXRlS2V5QW1vdW50LCBkYXRhLkFtb3VudCksCgkJc2RrLk5ld0F0dHJpYnV0ZSh0eXBlcy5BdHRyaWJ1dGVLZXlNZW1vLCBkYXRhLk1lbW8pLAoJCXNkay5OZXdBdHRyaWJ1dGUodHlwZXMuQXR0cmlidXRlS2V5QWNrU3VjY2VzcywgZm10LlNwcmludGYoJnF1b3Q7JXQmcXVvdDssIGFjay5TdWNjZXNzKCkpKSwKCX0KCglpZiBhY2tFcnIgIT0gbmlsIHsKCQlldmVudEF0dHJpYnV0ZXMgPSBhcHBlbmQoZXZlbnRBdHRyaWJ1dGVzLCBzZGsuTmV3QXR0cmlidXRlKHR5cGVzLkF0dHJpYnV0ZUtleUFja0Vycm9yLCBhY2tFcnIuRXJyb3IoKSkpCgl9CgoJY3R4LkV2ZW50TWFuYWdlcigpLkVtaXRFdmVudCgKCQlzZGsuTmV3RXZlbnQoCgkJCXR5cGVzLkV2ZW50VHlwZVBhY2tldCwKCQkJZXZlbnRBdHRyaWJ1dGVzLi4uLAoJCSksCgkpCgoJLy8gTk9URTogYWNrbm93bGVkZ2VtZW50IHdpbGwgYmUgd3JpdHRlbiBzeW5jaHJvbm91c2x5IGR1cmluZyBJQkMgaGFuZGxlciBleGVjdXRpb24uCglyZXR1cm4gYWNrCn0K"}}),e._v(" "),t("HighlightBox",{attrs:{type:"note"}},[t("p",[e._v("Observe in the previous example how we redirect to the module keeper's "),t("code",[e._v("OnRecvPacket")]),e._v(" method and are constructing the acknowledgment to be sent back.")])]),e._v(" "),t("h3",{attrs:{id:"acknowledging-or-timing-out-packets"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#acknowledging-or-timing-out-packets"}},[e._v("#")]),e._v(" Acknowledging or timing out packets")]),e._v(" "),t("p",[e._v("A useful exercise is to try to find and analyze the code corresponding to this. The place to start is the packet callbacks, usually defined in a file like "),t("code",[e._v("module_ibc.go")]),e._v(" or "),t("code",[e._v("ibc_module.go")]),e._v(".")]),e._v(" "),t("HighlightBox",{attrs:{type:"remember"}},[t("p",[e._v("When a packet times out, the submission of a "),t("code",[e._v("MsgTimeout")]),e._v(" is essential to get the locked funds unlocked again. As an exercise, try to find the code where this is executed.")])]),e._v(" "),t("HighlightBox",{attrs:{type:"synopsis"}},[t("p",[e._v("To summarize, this section has explored:")]),e._v(" "),t("ul",[t("li",[e._v("How IBC provides a reliable solution to the technical challenge of transferring fungible and non-fungible tokens between two different blockchains, freeing up great potential for cross-chain Decentralized Finance (DeFi) applications.")]),e._v(" "),t("li",[e._v("How the process for transferring value differs based on whether or not the IBC tokens are native to the source chain, or whether or not they are being sent on a channel they were previously received on.")])])])],1)}),[],!1,null,null,null);n.default=o.exports}}]);