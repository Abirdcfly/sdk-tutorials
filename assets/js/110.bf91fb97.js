(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{724:function(g,l,c){"use strict";c.r(l);var I=c(1),e=Object(I.a)({},(function(){var g=this,l=g.$createElement,c=g._self._c||l;return c("ContentSlotsDistributor",{attrs:{"slot-key":g.$parent.slotKey}},[c("h1",{attrs:{id:"extend-the-checkers-game-with-a-leaderboard"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#extend-the-checkers-game-with-a-leaderboard"}},[g._v("#")]),g._v(" Extend the Checkers Game With a Leaderboard")]),g._v(" "),c("p",[g._v("Go to your checkers folder and make sure that you are checked out on the "),c("a",{attrs:{href:"https://github.com/cosmos/b9-checkers-academy-draft/tree/v1-cosmjs-elements",target:"_blank",rel:"noopener noreferrer"}},[g._v("cosmjs-elements"),c("OutboundLink")],1),g._v(" tag.")]),g._v(" "),c("p",[g._v("In the checkers chain folder, you can scaffold a leaderboard module with Ignite:")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"JCBpZ25pdGUgc2NhZmZvbGQgbW9kdWxlIGxlYWRlcmJvYXJkIC0taWJjCg=="}}),g._v(" "),c("p",[g._v("In order to create and maintain a leaderboard, you need to store the player information. Scaffold a structure with:")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"JCBpZ25pdGUgc2NhZmZvbGQgbWFwIHBsYXllckluZm8gd29uQ291bnQ6dWludCBsb3N0Q291bnQ6dWludCBkYXRlVXBkYXRlZDpzdHJpbmcgLS1tb2R1bGUgbGVhZGVyYm9hcmQgLS1uby1tZXNzYWdlCg=="}}),g._v(" "),c("p",[g._v("Now you can use this structure to create the board itself:")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"JCBpZ25pdGUgc2NhZmZvbGQgc2luZ2xlIGJvYXJkIFBsYXllckluZm86UGxheWVySW5mbyAtLW1vZHVsZSBsZWFkZXJib2FyZCAtLW5vLW1lc3NhZ2UK"}}),g._v(" "),c("p",[g._v("You want the structures to be "),c("a",{attrs:{href:"https://en.wikipedia.org/wiki/Nullable_type",target:"_blank",rel:"noopener noreferrer"}},[g._v("nullable types"),c("OutboundLink")],1),g._v(", so a few adjustments are needed - especially because you do not have a null value for an address.")]),g._v(" "),c("p",[g._v("You need to make the adjustments in the Protobuf files "),c("code",[g._v("proto/leaderboard/board.proto")]),g._v(" and "),c("code",[g._v("proto/leaderboard/genesis.proto")]),g._v(". Make sure to import "),c("code",[g._v("gogoproto/gogo.proto")]),g._v(" and use "),c("code",[g._v("[(gogoproto.nullable) = false];")]),g._v(" for the "),c("code",[g._v("PlayerInfo")]),g._v(" and the "),c("code",[g._v("Board")]),g._v(".")]),g._v(" "),c("p",[g._v("For example, for "),c("code",[g._v("proto/leaderboard/board.proto")]),g._v(" try this:")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"protobuf",base64:"c3ludGF4ID0gJnF1b3Q7cHJvdG8zJnF1b3Q7OwpwYWNrYWdlIGI5bGFiLmNoZWNrZXJzLmxlYWRlcmJvYXJkOwoKb3B0aW9uIGdvX3BhY2thZ2UgPSAmcXVvdDtnaXRodWIuY29tL2I5bGFiL2NoZWNrZXJzL3gvbGVhZGVyYm9hcmQvdHlwZXMmcXVvdDs7CmltcG9ydCAmcXVvdDtsZWFkZXJib2FyZC9wbGF5ZXJfaW5mby5wcm90byZxdW90OzsgCmltcG9ydCAmcXVvdDtnb2dvcHJvdG8vZ29nby5wcm90byZxdW90OzsKCm1lc3NhZ2UgQm9hcmQgewogIHJlcGVhdGVkIFBsYXllckluZm8gcGxheWVySW5mbyA9IDEgWyhnb2dvcHJvdG8ubnVsbGFibGUpID0gZmFsc2VdOyAKICAKfQo="}}),g._v(" "),c("p",[g._v("You want to store a "),c("em",[g._v("win")]),g._v(", a "),c("em",[g._v("loss")]),g._v(", or a "),c("em",[g._v("draw")]),g._v(" when a game ends. Thus, you should create some helper functions first. Create a "),c("code",[g._v("x/checkers/keeper/player_info_handler.go")]),g._v(" file with the following code:")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"golang",base64:"cGFja2FnZSBrZWVwZXIKCmltcG9ydCAoCiAgICAmcXVvdDtmbXQmcXVvdDsKCiAgICBydWxlcyAmcXVvdDtnaXRodWIuY29tL2I5bGFiL2NoZWNrZXJzL3gvY2hlY2tlcnMvcnVsZXMmcXVvdDsKICAgICZxdW90O2dpdGh1Yi5jb20vYjlsYWIvY2hlY2tlcnMveC9jaGVja2Vycy90eXBlcyZxdW90OwoKICAgIHNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CikKCmZ1bmMgZ2V0V2lubmVyQW5kTG9zZXJBZGRyZXNzZXMoc3RvcmVkR2FtZSAqdHlwZXMuU3RvcmVkR2FtZSkgKHdpbm5lckFkZHJlc3Mgc2RrLkFjY0FkZHJlc3MsIGxvc2VyQWRkcmVzcyBzZGsuQWNjQWRkcmVzcykgewogICAgaWYgc3RvcmVkR2FtZS5XaW5uZXIgPT0gcnVsZXMuUGllY2VTdHJpbmdzW3J1bGVzLk5PX1BMQVlFUl0gewogICAgICAgIHBhbmljKHR5cGVzLkVyclRoZXJlSXNOb1dpbm5lci5FcnJvcigpKQogICAgfQogICAgcmVkQWRkcmVzcywgZXJyIDo9IHN0b3JlZEdhbWUuR2V0UmVkQWRkcmVzcygpCiAgICBpZiBlcnIgIT0gbmlsIHsKICAgICAgICBwYW5pYyhlcnIuRXJyb3IoKSkKICAgIH0KICAgIGJsYWNrQWRkcmVzcywgZXJyIDo9IHN0b3JlZEdhbWUuR2V0QmxhY2tBZGRyZXNzKCkKICAgIGlmIGVyciAhPSBuaWwgewogICAgICAgIHBhbmljKGVyci5FcnJvcigpKQogICAgfQogICAgaWYgc3RvcmVkR2FtZS5XaW5uZXIgPT0gcnVsZXMuUGllY2VTdHJpbmdzW3J1bGVzLlJFRF9QTEFZRVJdIHsKICAgICAgICB3aW5uZXJBZGRyZXNzID0gcmVkQWRkcmVzcwogICAgICAgIGxvc2VyQWRkcmVzcyA9IGJsYWNrQWRkcmVzcwogICAgfSBlbHNlIGlmIHN0b3JlZEdhbWUuV2lubmVyID09IHJ1bGVzLlBpZWNlU3RyaW5nc1tydWxlcy5CTEFDS19QTEFZRVJdIHsKICAgICAgICB3aW5uZXJBZGRyZXNzID0gYmxhY2tBZGRyZXNzCiAgICAgICAgbG9zZXJBZGRyZXNzID0gcmVkQWRkcmVzcwogICAgfSBlbHNlIHsKICAgICAgICBwYW5pYyhmbXQuU3ByaW50Zih0eXBlcy5FcnJXaW5uZXJOb3RQYXJzZWFibGUuRXJyb3IoKSwgc3RvcmVkR2FtZS5XaW5uZXIpKQogICAgfQogICAgcmV0dXJuIHdpbm5lckFkZHJlc3MsIGxvc2VyQWRkcmVzcwp9CgpmdW5jIChrICpLZWVwZXIpIE11c3RSZWdpc3RlclBsYXllcldpbihjdHggc2RrLkNvbnRleHQsIHN0b3JlZEdhbWUgKnR5cGVzLlN0b3JlZEdhbWUpIHsKICAgIHdpbm5lckFkZHJlc3MsIGxvc2VyQWRkcmVzcyA6PSBnZXRXaW5uZXJBbmRMb3NlckFkZHJlc3NlcyhzdG9yZWRHYW1lKQogICAgay5ib2FyZC5NdXN0QWRkV29uR2FtZVJlc3VsdFRvUGxheWVyKGN0eCwgd2lubmVyQWRkcmVzcykKICAgIGsuYm9hcmQuTXVzdEFkZExvc3RHYW1lUmVzdWx0VG9QbGF5ZXIoY3R4LCBsb3NlckFkZHJlc3MpCn0KCmZ1bmMgKGsgKktlZXBlcikgTXVzdFJlZ2lzdGVyUGxheWVyRm9yZmVpdChjdHggc2RrLkNvbnRleHQsIHN0b3JlZEdhbWUgKnR5cGVzLlN0b3JlZEdhbWUpIHsKICAgIHdpbm5lckFkZHJlc3MsIGxvc2VyQWRkcmVzcyA6PSBnZXRXaW5uZXJBbmRMb3NlckFkZHJlc3NlcyhzdG9yZWRHYW1lKQogICAgay5ib2FyZC5NdXN0QWRkV29uR2FtZVJlc3VsdFRvUGxheWVyKGN0eCwgd2lubmVyQWRkcmVzcykKICAgIGsuYm9hcmQuTXVzdEFkZEZvcmZlaXRlZEdhbWVSZXN1bHRUb1BsYXllcihjdHgsIGxvc2VyQWRkcmVzcykKfQoK"}}),g._v(" "),c("p",[g._v("The checkers module will need to access the leaderboard methods, like "),c("code",[g._v("k.board.MustAddWonGameResultToPlayer(...)")]),g._v(".")]),g._v(" "),c("p",[g._v("To achieve this, first, you need to write those functions. Create a "),c("code",[g._v("x/leaderboard/keeper/player_info_handler.go")]),g._v(" file with the following code:")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"golang",base64:"cGFja2FnZSBrZWVwZXIKCmltcG9ydCAoCiAgICAmcXVvdDtnaXRodWIuY29tL2I5bGFiL2NoZWNrZXJzL3gvbGVhZGVyYm9hcmQvdHlwZXMmcXVvdDsKICAgIHNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CikKCmZ1bmMgbXVzdEFkZERlbHRhR2FtZVJlc3VsdFRvUGxheWVyKAogICAgayAqS2VlcGVyLAogICAgY3R4IHNkay5Db250ZXh0LAogICAgcGxheWVyIHNkay5BY2NBZGRyZXNzLAogICAgd29uRGVsdGEgdWludDY0LAogICAgbG9zdERlbHRhIHVpbnQ2NCwKICAgIGZvcmZlaXRlZERlbHRhIHVpbnQ2NCwKKSAocGxheWVySW5mbyB0eXBlcy5QbGF5ZXJJbmZvKSB7CiAgICBwbGF5ZXJJbmZvLCBmb3VuZCA6PSBrLkdldFBsYXllckluZm8oY3R4LCBwbGF5ZXIuU3RyaW5nKCkpCiAgICBpZiAhZm91bmQgewogICAgICAgIHBsYXllckluZm8gPSB0eXBlcy5QbGF5ZXJJbmZvewogICAgICAgICAgICBJbmRleDogICAgICAgICAgcGxheWVyLlN0cmluZygpLAogICAgICAgICAgICBXb25Db3VudDogICAgICAgMCwKICAgICAgICAgICAgTG9zdENvdW50OiAgICAgIDAsCiAgICAgICAgICAgIEZvcmZlaXRlZENvdW50OiAwLAogICAgICAgICAgICBEYXRlVXBkYXRlZDogICAgY3R4LkJsb2NrVGltZSgpLlVUQygpLkZvcm1hdCh0eXBlcy5UaW1lTGF5b3V0KSwKICAgICAgICB9CiAgICB9CiAgICBwbGF5ZXJJbmZvLldvbkNvdW50ICs9IHdvbkRlbHRhCiAgICBwbGF5ZXJJbmZvLkxvc3RDb3VudCArPSBsb3N0RGVsdGEKICAgIHBsYXllckluZm8uRm9yZmVpdGVkQ291bnQgKz0gZm9yZmVpdGVkRGVsdGEKICAgIGsuU2V0UGxheWVySW5mbyhjdHgsIHBsYXllckluZm8pCiAgICByZXR1cm4gcGxheWVySW5mbwp9CgpmdW5jIChrICpLZWVwZXIpIE11c3RBZGRXb25HYW1lUmVzdWx0VG9QbGF5ZXIoY3R4IHNkay5Db250ZXh0LCBwbGF5ZXIgc2RrLkFjY0FkZHJlc3MpIHR5cGVzLlBsYXllckluZm8gewogICAgcmV0dXJuIG11c3RBZGREZWx0YUdhbWVSZXN1bHRUb1BsYXllcihrLCBjdHgsIHBsYXllciwgMSwgMCwgMCkKfQoKZnVuYyAoayAqS2VlcGVyKSBNdXN0QWRkTG9zdEdhbWVSZXN1bHRUb1BsYXllcihjdHggc2RrLkNvbnRleHQsIHBsYXllciBzZGsuQWNjQWRkcmVzcykgdHlwZXMuUGxheWVySW5mbyB7CiAgICByZXR1cm4gbXVzdEFkZERlbHRhR2FtZVJlc3VsdFRvUGxheWVyKGssIGN0eCwgcGxheWVyLCAwLCAxLCAwKQp9CgpmdW5jIChrICpLZWVwZXIpIE11c3RBZGRGb3JmZWl0ZWRHYW1lUmVzdWx0VG9QbGF5ZXIoY3R4IHNkay5Db250ZXh0LCBwbGF5ZXIgc2RrLkFjY0FkZHJlc3MpIHR5cGVzLlBsYXllckluZm8gewogICAgcmV0dXJuIG11c3RBZGREZWx0YUdhbWVSZXN1bHRUb1BsYXllcihrLCBjdHgsIHBsYXllciwgMCwgMCwgMSkKfQo="}}),g._v(" "),c("p",[g._v("For the code above to function, you need to define "),c("code",[g._v("TimeLayout")]),g._v(" in "),c("code",[g._v("x/leaderboard/types/keys.go")]),g._v(". Add the following piece of code at the end of the file:")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"golang",base64:"Y29uc3QgKAogICAgVGltZUxheW91dCAgICAgICAgICAgICAgPSAmcXVvdDsyMDA2LTAxLTAyIDE1OjA0OjA1Ljk5OTk5OTk5OSArMDAwMCBVVEMmcXVvdDsKICAgIExlYWRlcmJvYXJkV2lubmVyTGVuZ3RoID0gdWludDY0KDEwMCkKKQo="}}),g._v(" "),c("p",[g._v("Check your "),c("code",[g._v("x/checkers/types/errors.go")]),g._v(" and make sure that it includes the following:")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"golang",base64:"ICAgIEVycldpbm5lck5vdFBhcnNlYWJsZSAgICAgID0gc2RrZXJyb3JzLlJlZ2lzdGVyKE1vZHVsZU5hbWUsIDExMTgsICZxdW90O3dpbm5lciBpcyBub3QgcGFyc2VhYmxlOiAlcyZxdW90OykKICAgIEVyclRoZXJlSXNOb1dpbm5lciAgICAgICAgID0gc2RrZXJyb3JzLlJlZ2lzdGVyKE1vZHVsZU5hbWUsIDExMTksICZxdW90O3RoZXJlIGlzIG5vIHdpbm5lciZxdW90OykKICAgIEVyckludmFsaWREYXRlQWRkZWQgICAgICAgID0gc2RrZXJyb3JzLlJlZ2lzdGVyKE1vZHVsZU5hbWUsIDExMjAsICZxdW90O2RhdGVBZGRlZCBjYW5ub3QgYmUgcGFyc2VkOiAlcyZxdW90OykKICAgIEVyckNhbm5vdEFkZFRvTGVhZGVyYm9hcmQgID0gc2RrZXJyb3JzLlJlZ2lzdGVyKE1vZHVsZU5hbWUsIDExMjEsICZxdW90O2Nhbm5vdCBhZGQgdG8gbGVhZGVyYm9hcmQ6ICVzJnF1b3Q7KQo="}}),g._v(" "),c("p",[g._v("Now it is time to allow the checkers module access to the leaderboard module. Look for "),c("code",[g._v("app.CheckersKeeper")]),g._v(" in "),c("code",[g._v("app/app.go")]),g._v(" and modify it to include "),c("code",[g._v("app.LeaderboardKeeper")]),g._v(":")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"golang",base64:"YXBwLkNoZWNrZXJzS2VlcGVyID0gKmNoZWNrZXJzbW9kdWxla2VlcGVyLk5ld0tlZXBlcigKICAgICAgICBhcHAuQmFua0tlZXBlciwKICAgICAgICBhcHAuTGVhZGVyYm9hcmRLZWVwZXIsCiAgICAgICAgYXBwQ29kZWMsCiAgICAgICAga2V5c1tjaGVja2Vyc21vZHVsZXR5cGVzLlN0b3JlS2V5XSwKICAgICAgICBrZXlzW2NoZWNrZXJzbW9kdWxldHlwZXMuTWVtU3RvcmVLZXldLAogICAgICAgIGFwcC5HZXRTdWJzcGFjZShjaGVja2Vyc21vZHVsZXR5cGVzLk1vZHVsZU5hbWUpLAogICAgKQogICAgY2hlY2tlcnNNb2R1bGUgOj0gY2hlY2tlcnNtb2R1bGUuTmV3QXBwTW9kdWxlKGFwcENvZGVjLCBhcHAuQ2hlY2tlcnNLZWVwZXIsIGFwcC5BY2NvdW50S2VlcGVyLCBhcHAuQmFua0tlZXBlcikK"}}),g._v(" "),c("p",[g._v("In addition, you need to modify "),c("code",[g._v("x/checkers/keeper/keeper.go")]),g._v(" and include the leaderboard keeper:")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"golang",base64:"aW1wb3J0KAogICAgLi4uCgogICAgbGVhZGVyQm9hcmRLZWVwZXIgJnF1b3Q7Z2l0aHViLmNvbS9iOWxhYi9jaGVja2Vycy94L2xlYWRlcmJvYXJkL2tlZXBlciZxdW90OwogICAgKQoKLi4uCgp0eXBlICgKICAgIEtlZXBlciBzdHJ1Y3QgewogICAgICAgIGJhbmsgICAgICAgdHlwZXMuQmFua0VzY3Jvd0tlZXBlcgogICAgICAgIGJvYXJkICAgICAgbGVhZGVyQm9hcmRLZWVwZXIuS2VlcGVyCiAgICAgICAgY2RjICAgICAgICBjb2RlYy5CaW5hcnlDb2RlYwogICAgICAgIHN0b3JlS2V5ICAgc2RrLlN0b3JlS2V5CiAgICAgICAgbWVtS2V5ICAgICBzZGsuU3RvcmVLZXkKICAgICAgICBwYXJhbXN0b3JlIHBhcmFtdHlwZXMuU3Vic3BhY2UKICAgIH0KKQoKLi4uCgpmdW5jIE5ld0tlZXBlcigKICAgIGJhbmsgdHlwZXMuQmFua0VzY3Jvd0tlZXBlciwKICAgIGJvYXJkIGxlYWRlckJvYXJkS2VlcGVyLktlZXBlciwKICAgIGNkYyBjb2RlYy5CaW5hcnlDb2RlYywKICAgIHN0b3JlS2V5LAogICAgbWVtS2V5IHNkay5TdG9yZUtleSwKICAgIHBzIHBhcmFtdHlwZXMuU3Vic3BhY2UsCgopICpLZWVwZXIgewogICAgLy8gc2V0IEtleVRhYmxlIGlmIGl0IGhhcyBub3QgYWxyZWFkeSBiZWVuIHNldAogICAgaWYgIXBzLkhhc0tleVRhYmxlKCkgewogICAgICAgIHBzID0gcHMuV2l0aEtleVRhYmxlKHR5cGVzLlBhcmFtS2V5VGFibGUoKSkKICAgIH0KCiAgICByZXR1cm4gJmFtcDtLZWVwZXJ7CiAgICAgICAgYmFuazogICAgICAgYmFuaywKICAgICAgICBib2FyZDogICAgICBib2FyZCwKICAgICAgICBjZGM6ICAgICAgICBjZGMsCiAgICAgICAgc3RvcmVLZXk6ICAgc3RvcmVLZXksCiAgICAgICAgbWVtS2V5OiAgICAgbWVtS2V5LAogICAgICAgIHBhcmFtc3RvcmU6IHBzLAogICAgfQp9Cgo="}}),g._v(" "),c("p",[g._v("Now the checkers module can call the keeper of the leaderboard module, so add the call for a "),c("em",[g._v("win")]),g._v(" in "),c("code",[g._v("x/checkers/keeper/msg_server_play_move.go")]),g._v(":")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"golang",base64:"CmZ1bmMgKGsgbXNnU2VydmVyKSBQbGF5TW92ZShnb0N0eCBjb250ZXh0LkNvbnRleHQsIG1zZyAqdHlwZXMuTXNnUGxheU1vdmUpICgqdHlwZXMuTXNnUGxheU1vdmVSZXNwb25zZSwgZXJyb3IpIHsKICAgIGN0eCA6PSBzZGsuVW53cmFwU0RLQ29udGV4dChnb0N0eCkKCiAgICAuLi4KCiAgICBsYXN0Qm9hcmQgOj0gZ2FtZS5TdHJpbmcoKQogICAgaWYgc3RvcmVkR2FtZS5XaW5uZXIgPT0gcnVsZXMuUGllY2VTdHJpbmdzW3J1bGVzLk5PX1BMQVlFUl0gewogICAgICAgIGsuS2VlcGVyLlNlbmRUb0ZpZm9UYWlsKGN0eCwgJmFtcDtzdG9yZWRHYW1lLCAmYW1wO3N5c3RlbUluZm8pCiAgICAgICAgc3RvcmVkR2FtZS5Cb2FyZCA9IGxhc3RCb2FyZAogICAgfSBlbHNlIHsKICAgICAgICBrLktlZXBlci5SZW1vdmVGcm9tRmlmbyhjdHgsICZhbXA7c3RvcmVkR2FtZSwgJmFtcDtzeXN0ZW1JbmZvKQogICAgICAgIHN0b3JlZEdhbWUuQm9hcmQgPSAmcXVvdDsmcXVvdDsKICAgICAgICBrLktlZXBlci5NdXN0UGF5V2lubmluZ3MoY3R4LCAmYW1wO3N0b3JlZEdhbWUpCgogICAgICAgIC8vIEhlcmUgeW91IGNhbiByZWdpc3RlciBhIHdpbgogICAgICAgIGsuS2VlcGVyLk11c3RSZWdpc3RlclBsYXllcldpbihjdHgsICZhbXA7c3RvcmVkR2FtZSkKICAgIH0KCiAgICAuLi4K"}}),g._v(" "),c("p",[g._v("Now add the call for a "),c("em",[g._v("draw")]),g._v(" in "),c("code",[g._v("x/checkers/keeper/end_block_server_game.go")]),g._v(":")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"golang",base64:"ZnVuYyAoayBLZWVwZXIpIEZvcmZlaXRFeHBpcmVkR2FtZXMoZ29DdHggY29udGV4dC5Db250ZXh0KSB7CiAgICBjdHggOj0gc2RrLlVud3JhcFNES0NvbnRleHQoZ29DdHgpCgogICAgLi4uCiAgICAKICAgIGlmIGRlYWRsaW5lLkJlZm9yZShjdHguQmxvY2tUaW1lKCkpIHsKICAgIC8vIEdhbWUgaXMgcGFzdCBkZWFkbGluZQogICAgay5SZW1vdmVGcm9tRmlmbyhjdHgsICZhbXA7c3RvcmVkR2FtZSwgJmFtcDtzeXN0ZW1JbmZvKQogICAgbGFzdEJvYXJkIDo9IHN0b3JlZEdhbWUuQm9hcmQKICAgIGlmIHN0b3JlZEdhbWUuTW92ZUNvdW50ICZsdDs9IDEgewogICAgICAgIC8vIE5vIHBvaW50IGluIGtlZXBpbmcgYSBnYW1lIHRoYXQgd2FzIG5ldmVyIHJlYWxseSBwbGF5ZWQKICAgICAgICBrLlJlbW92ZVN0b3JlZEdhbWUoY3R4LCBnYW1lSW5kZXgpCiAgICAgICAgaWYgc3RvcmVkR2FtZS5Nb3ZlQ291bnQgPT0gMSB7CiAgICAgICAgICAgIGsuTXVzdFJlZnVuZFdhZ2VyKGN0eCwgJmFtcDtzdG9yZWRHYW1lKQogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgc3RvcmVkR2FtZS5XaW5uZXIsIGZvdW5kID0gb3Bwb25lbnRzW3N0b3JlZEdhbWUuVHVybl0KICAgICAgICBpZiAhZm91bmQgewogICAgICAgICAgICBwYW5pYyhmbXQuU3ByaW50Zih0eXBlcy5FcnJDYW5ub3RGaW5kV2lubmVyQnlDb2xvci5FcnJvcigpLCBzdG9yZWRHYW1lLlR1cm4pKQogICAgICAgIH0KICAgICAgICBrLk11c3RQYXlXaW5uaW5ncyhjdHgsICZhbXA7c3RvcmVkR2FtZSkKCiAgICAgICAgLy8gSGVyZSB5b3UgY2FuIHJlZ2lzdGVyIGEgZHJhdwogICAgICAgIGsuTXVzdFJlZ2lzdGVyUGxheWVyRm9yZmVpdChjdHgsICZhbXA7c3RvcmVkR2FtZSkKCiAgICAgICAgc3RvcmVkR2FtZS5Cb2FyZCA9ICZxdW90OyZxdW90OwogICAgICAgIGsuU2V0U3RvcmVkR2FtZShjdHgsIHN0b3JlZEdhbWUpCiAgICB9CiAgICAKICAgIC4uLgo="}}),g._v(" "),c("p",[g._v("That will get the job done and add the player's "),c("em",[g._v("win")]),g._v(", "),c("em",[g._v("lose")]),g._v(", or "),c("em",[g._v("forfeit")]),g._v(" counts to the store.")]),g._v(" "),c("p",[g._v("It is time to sort the players and clip the leaderboard to the best 100 ("),c("code",[g._v("LeaderboardWinnerLength")]),g._v(") players. Scaffold a new transaction:")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"JCBpZ25pdGUgc2NhZmZvbGQgbWVzc2FnZSB1cGRhdGVCb2FyZCAtLW1vZHVsZSBsZWFkZXJib2FyZAo="}}),g._v(" "),c("p",[g._v("Again, you can first create some helper functions in "),c("code",[g._v("x/leaderboard/keeper/board.go")]),g._v(":")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"golang",base64:"Li4uCgogICAgZnVuYyBQYXJzZURhdGVBZGRlZEFzVGltZShkYXRlQWRkZWQgc3RyaW5nKSAoZGF0ZUFkZGVkUGFyc2VkIHRpbWUuVGltZSwgZXJyIGVycm9yKSB7CiAgICAgICAgZGF0ZUFkZGVkUGFyc2VkLCBlcnJEYXRlQWRkZWQgOj0gdGltZS5QYXJzZSh0eXBlcy5UaW1lTGF5b3V0LCBkYXRlQWRkZWQpCiAgICAgICAgcmV0dXJuIGRhdGVBZGRlZFBhcnNlZCwgc2RrZXJyb3JzLldyYXBmKGVyckRhdGVBZGRlZCwgdHlwZXMuRXJySW52YWxpZERhdGVBZGRlZC5FcnJvcigpLCBkYXRlQWRkZWQpCiAgICB9CgogICAgZnVuYyBTb3J0UGxheWVySW5mbyhwbGF5ZXJJbmZvTGlzdCBbXXR5cGVzLlBsYXllckluZm8pIHsKICAgICAgICBzb3J0LlNsaWNlU3RhYmxlKHBsYXllckluZm9MaXN0WzpdLCBmdW5jKGksIGogaW50KSBib29sIHsKICAgICAgICAgICAgaWYgcGxheWVySW5mb0xpc3RbaV0uV29uQ291bnQgJmd0OyBwbGF5ZXJJbmZvTGlzdFtqXS5Xb25Db3VudCB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIHBsYXllckluZm9MaXN0W2ldLldvbkNvdW50ICZsdDsgcGxheWVySW5mb0xpc3Rbal0uV29uQ291bnQgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmlyc3RQbGF5ZXJUaW1lLCBfIDo9IFBhcnNlRGF0ZUFkZGVkQXNUaW1lKHBsYXllckluZm9MaXN0W2ldLkRhdGVVcGRhdGVkKQogICAgICAgICAgICBzZWNvbmRQbGF5ZXJUaW1lLF8gOj0gUGFyc2VEYXRlQWRkZWRBc1RpbWUocGxheWVySW5mb0xpc3Rbal0uRGF0ZVVwZGF0ZWQpCgogICAgICAgICAgICByZXR1cm4gZmlyc3RQbGF5ZXJUaW1lLkFmdGVyKHNlY29uZFBsYXllclRpbWUpCiAgICAgICAgfSkKICAgIH0KCiAgICBmdW5jIChrIEtlZXBlcikgdXBkYXRlQm9hcmQoY3R4IHNkay5Db250ZXh0LCBwbGF5ZXJJbmZvTGlzdCBbXXR5cGVzLlBsYXllckluZm8pIHsKICAgICAgICBTb3J0UGxheWVySW5mbyhwbGF5ZXJJbmZvTGlzdCkKCiAgICAgICAgaWYgdHlwZXMuTGVhZGVyYm9hcmRXaW5uZXJMZW5ndGggJmx0OyB1aW50NjQobGVuKHBsYXllckluZm9MaXN0KSkgewogICAgICAgICAgICBwbGF5ZXJJbmZvTGlzdCA9IHBsYXllckluZm9MaXN0Wzp0eXBlcy5MZWFkZXJib2FyZFdpbm5lckxlbmd0aF0KICAgICAgICB9CgogICAgICAgIGsuU2V0Qm9hcmQoY3R4LCB0eXBlcy5Cb2FyZCB7CiAgICAgICAgICAgIFBsYXllckluZm86IHBsYXllckluZm9MaXN0LAogICAgICAgIH0pCiAgICB9Cg=="}}),g._v(" "),c("p",[g._v("If it cannot parse the date information, it will throw an error that you need to include in "),c("code",[g._v("x/leaderboard/types/errors.go")]),g._v(":")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"golang",base64:"ICAgIEVyckludmFsaWREYXRlQWRkZWQgICAgID0gc2RrZXJyb3JzLlJlZ2lzdGVyKE1vZHVsZU5hbWUsIDExMjAsICZxdW90O2RhdGVBZGRlZCBjYW5ub3QgYmUgcGFyc2VkOiAlcyZxdW90OykK"}}),g._v(" "),c("p",[g._v("Now you need to call "),c("code",[g._v("updateBoard")]),g._v(" in "),c("code",[g._v("x/leaderboard/keeper/msg_server_update_board.go")]),g._v(":")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"golang",base64:"cGFja2FnZSBrZWVwZXIKCmltcG9ydCAoCiAgICAmcXVvdDtjb250ZXh0JnF1b3Q7CgogICAgJnF1b3Q7Z2l0aHViLmNvbS9iOWxhYi9jaGVja2Vycy94L2xlYWRlcmJvYXJkL3R5cGVzJnF1b3Q7CiAgICBzZGsgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay90eXBlcyZxdW90OwopCgpmdW5jIChrIG1zZ1NlcnZlcikgVXBkYXRlQm9hcmQoZ29DdHggY29udGV4dC5Db250ZXh0LCBtc2cgKnR5cGVzLk1zZ1VwZGF0ZUJvYXJkKSAoKnR5cGVzLk1zZ1VwZGF0ZUJvYXJkUmVzcG9uc2UsIGVycm9yKSB7CiAgICBjdHggOj0gc2RrLlVud3JhcFNES0NvbnRleHQoZ29DdHgpCgogICAgcGxheWVySW5mb0xpc3QgOj0gay5HZXRBbGxQbGF5ZXJJbmZvKGN0eCkKICAgIGsudXBkYXRlQm9hcmQoY3R4LCBwbGF5ZXJJbmZvTGlzdCkKCiAgICByZXR1cm4gJmFtcDt0eXBlcy5Nc2dVcGRhdGVCb2FyZFJlc3BvbnNle30sIG5pbAp9Cg=="}}),g._v(" "),c("p",[g._v("That is it! Now the checkers blockchain can keep track of player information, and create or update the leaderboard based on player information if requested via the CLI.")]),g._v(" "),c("h3",{attrs:{id:"forwarding-player-information-via-ibc"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#forwarding-player-information-via-ibc"}},[g._v("#")]),g._v(" Forwarding player information via IBC")]),g._v(" "),c("p",[g._v("It is time to look at how you can forward the player information via the Inter-Blockchain Communication Protocol (IBC).")]),g._v(" "),c("HighlightBox",{attrs:{type:"remember"}},[c("p",[g._v("Remember, you created the module with the "),c("code",[g._v("--ibc")]),g._v(" flag.")])]),g._v(" "),c("p",[g._v("You can scaffold an IBC transaction with:")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"JCBpZ25pdGUgc2NhZmZvbGQgcGFja2V0IGNhbmRpZGF0ZSBQbGF5ZXJJbmZvOlBsYXllckluZm8gLS1tb2R1bGUgbGVhZGVyYm9hcmQK"}}),g._v(" "),c("p",[g._v("You do not want arbitrary player information, but instead, want to fetch player information from the store, so make a small adjustment to "),c("code",[g._v("x/leaderboard/client/cli/tx_candidate.go")]),g._v(". Look for the following lines and remove them:")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"golang",base64:"ICAgIGFyZ1BsYXllckluZm8gOj0gbmV3KHR5cGVzLlBsYXllckluZm8pCiAgICBlcnIgPSBqc29uLlVubWFyc2hhbChbXWJ5dGUoYXJnc1syXSksIGFyZ1BsYXllckluZm8pCiAgICBpZiBlcnIgIT0gbmlsIHsKICAgICAgICByZXR1cm4gZXJyCiAgICB9Cg=="}}),g._v(" "),c("p",[g._v("You will also need to remove the import of "),c("code",[g._v("encoding/json")]),g._v(" because it is not used anymore, and you should remove the parameter "),c("code",[g._v("argPlayerInfo")]),g._v(" from the "),c("code",[g._v("types.NewMsgSendCandidate(...)")]),g._v(" call.")]),g._v(" "),c("p",[g._v("The last step is to implement the logic to fetch and send player information in "),c("code",[g._v("x/leaderboard/keeper/msg_server_candidate.go")]),g._v(":")]),g._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"golang",base64:"cGFja2FnZSBrZWVwZXIKCmltcG9ydCAoCiAgICAmcXVvdDtlcnJvcnMmcXVvdDsKICAgICZxdW90O2NvbnRleHQmcXVvdDsKICAgIC4uLgopCgpmdW5jIChrIG1zZ1NlcnZlcikgU2VuZENhbmRpZGF0ZShnb0N0eCBjb250ZXh0LkNvbnRleHQsIG1zZyAqdHlwZXMuTXNnU2VuZENhbmRpZGF0ZSkgKCp0eXBlcy5Nc2dTZW5kQ2FuZGlkYXRlUmVzcG9uc2UsIGVycm9yKSB7CiAgICBjdHggOj0gc2RrLlVud3JhcFNES0NvbnRleHQoZ29DdHgpCgogICAgLy8gVE9ETzogbG9naWMgYmVmb3JlIHRyYW5zbWl0dGluZyB0aGUgcGFja2V0CgogICAgLy8gQ29uc3RydWN0IHRoZSBwYWNrZXQKICAgIHZhciBwYWNrZXQgdHlwZXMuQ2FuZGlkYXRlUGFja2V0RGF0YQoKICAgIGFsbFBsYXllckluZm8gOj0gay5HZXRBbGxQbGF5ZXJJbmZvKGN0eCkKCiAgICBmb3VuZF9pbl9wbGF5ZXJfbGlzdDo9IGZhbHNlCiAgICBmb3IgaSA6PSByYW5nZSBhbGxQbGF5ZXJJbmZvIHsKICAgICAgICBpZiBhbGxQbGF5ZXJJbmZvW2ldLkluZGV4ID09IG1zZy5DcmVhdG9yIHsKICAgICAgICAgICAgcGFja2V0LlBsYXllckluZm8gPSAmYW1wO2FsbFBsYXllckluZm9baV07CiAgICAgICAgICAgIGZvdW5kX2luX3BsYXllcl9saXN0ID0gdHJ1ZQogICAgICAgICAgICBicmVhawogICAgICAgIH0KICAgIH0KCiAgICBpZiAhZm91bmRfaW5fcGxheWVyX2xpc3QgewogICAgICAgIGVycm9ycy5OZXcoJnF1b3Q7UGxheWVyIG5vdCBmb3VuZCZxdW90OykKICAgIH0KLi4uCn0KCg=="}}),g._v(" "),c("p",[g._v("You do not handle received packages, because this module is only meant for sending player information to a separate leaderboard chain, which you will create next.")])],1)}),[],!1,null,null,null);l.default=e.exports}}]);